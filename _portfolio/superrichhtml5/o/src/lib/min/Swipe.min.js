(function(e){function p(e,t,n){var r=null,i=e-1;return t>0&&n==="left"?!0:t<i&&n==="right"?!0:!1}function d(e){var t=e-1,n=e+1;t<0&&(t=null);return[t,n]}var t,n=e.com.camelot,r=n.core,i=r.IWGBank,s=n.iwg,o=s.lib,u=o.MEvent,a=e.com.camelot.iwg.lib.R,f=e.com.greensock,l=o.Helper,c=Hammer(s.iwgCanvas,{prevent_default:!0}),h=function(e){if(typeof h.instance=="object")return h.instance;var t=!1,n=null,r=e,i=null,s=null,o=null,u=null,a=null,f=!1,l=null,c=null,p=!1,d=.96,v=null,m=null,g=20,y=0,b=!1,w=0,E=0,S=null,x=null,T=!1;this.getStage=function(){return r};this.getIsChecking=function(){return b};this.getEnabled=function(){return t};this.getEle=function(){return n};this.getTargetHeight=function(){return o};this.getTargetWidth=function(){return s};this.getCurrentScreen=function(){return u};this.getLock=function(){return f};this.getPlaceholderX=function(){return l};this.getPlaceholderY=function(){return c};this.getFlag=function(){return p};this.getLowerBound=function(){return v};this.getUpperBound=function(){return m};this.getiWidth=function(){return i};this.getPercentage=function(){return g};this.getCurrentStageX=function(){return y};this.getFriction=function(){return d};this.getScreensX=function(){return a};this.getStartX=function(){return E};this.getDragDirection=function(){return S};this.getDragDistance=function(){return x};this.getBuffer=function(){return w};this.getIsMoving=function(){return T};this.setEnabled=function(e){typeof e=="boolean"&&(t=e)};this.setCurrentScreen=function(e){u=e};this.setEle=function(e){n=e};this.setStage=function(e){r=e};this.setTargetWidth=function(e){s=e};this.setTargetHeight=function(e){o=e};this.setLock=function(e){f=e};this.setPlaceholderX=function(e){l=e};this.setPlaceholderY=function(e){c=e};this.setFlag=function(e){p=e};this.setLowerBound=function(e){v=e};this.setUpperBound=function(e){m=e};this.setiWidth=function(e){i=e};this.setCurrentStageX=function(e){y=e};this.setFriction=function(e){d=e};this.setScreensX=function(e){a=e};this.setStartX=function(e){E=e};this.setDragDirection=function(e){S=e};this.setDragDistance=function(e){x=e};this.setIsChecking=function(e){b=e};this.setBuffer=function(e){w=e};this.setIsMoving=function(e){T=e};h.instance=this};h.prototype.enabled=function(e,t,n,r){var i=this,o=n.getBounds();this.setEnabled(e);this.setEle(t);this.setStage(n);this.setBuffer(r);this.setCurrentScreen(0);this.setTargetWidth(o.width);this.setTargetHeight(o.height);this.setBounds();this.setScreenPositions();if(this.getEnabled()){var i=this;c.on("drag",function(e){if(a.LOCK===!1){i.setDragDirection(e.gesture.direction);i.setDragDistance(e.gesture.deltaX);i.setStartX(e.gesture.startEvent.center.pageX);var t=0;t=i.getCurrentStageX()+i.getDragDistance();if(t<-i.getLowerBound()&&t>-i.getUpperBound()-360)if(i.getDragDirection()==="right")if(i.getDragDistance()>i.getBuffer()){a.MAINGAMECONTAINER.x=t-i.getBuffer();if(i.getIsMoving()===!1){s.IWGEM.dispatchEvent(u.MOVELEFTSTART);i.setIsMoving(!0)}}else t=0;else if(i.getDragDistance()<-i.getBuffer()){a.MAINGAMECONTAINER.x=t+i.getBuffer();if(i.getIsMoving()===!1){s.IWGEM.dispatchEvent(u.MOVERIGHTSTART);i.setIsMoving(!0)}}else t=0}});c.on("dragend",function(e){i.setFlag(null);var t=i.getDragDistance(),n=i.getStage();i.setIsMoving(!1);if(n.x>0)i.returnToZero();else if(n.x<-i.getUpperBound())i.returnToEnd();else{i.setCurrentStageX(n.x);var r=i.getCurrentScreen(),o=d(r),a=i.getScreensX(),f=null,c=null;o[0]!==null&&(f=a[o[0]]);o[1]!==null&&(c=a[o[1]]);var h=new TimelineLite;if(t<0&&t<-(c/10)){i.moveRight();s.IWGEM.dispatchEvent(u.MOVERIGHTCOMPLETE)}else if(t>0&&t>f/10){i.moveLeft();s.IWGEM.dispatchEvent(u.MOVELEFTCOMPLETE)}else{var p=i.getScreensX()[i.getCurrentScreen()];h.to(n,.2,{x:-p,ease:"Power4.easeInOut"}).call(function(){n.x=-p;i.setCurrentStageX(n.x);i.setCurrentScreen(r)});i.getCurrentScreen()===0?l.showPrompt("left",4e3):l.showPrompt("right",4e3)}}})}};h.prototype.lock=function(){if(this.getLock===!0){console.warn("Swipe is already set to lock");return!1}this.setLock(!0)};h.prototype.setBounds=function(){var e=this.getTargetWidth(),t=this.getScreens(this.getStage()).length,n=Math.round(e/t),r=n/100*this.getPercentage();this.setiWidth(n);this.setLowerBound(0-r);var i=t-1,s=i*n;this.setUpperBound(s)};h.prototype.getScreens=function(){var e=this.getStage();return e.children};h.prototype.returnToZero=function(){var e=this.getStage(),t=new TimelineLite;t.to(e,.2,{x:0,ease:"Power4.easeInOut"}).call(function(){e.x=0});this.setCurrentStageX(0);l.showPrompt("left",4e3)};h.prototype.setCurrentScreen=function(e){var t=this.getCurrentScreen(),n=t+e;this.setCurrentScreen(n)};h.prototype.returnToEnd=function(){var e=this.getStage(),t=this,n=new TimelineLite;n.to(e,.2,{x:-a.RIGHTGAMEWINDOW.x,ease:"Power4.easeInOut"}).call(function(){e.x=-a.RIGHTGAMEWINDOW.x});this.setCurrentStageX(-a.RIGHTGAMEWINDOW.x);this.setCurrentScreen(t.getCurrentScreen());l.showPrompt("right",4e3)};h.prototype.setScreenPositions=function(){var e=this.getStage().children,t=[];for(var n in e)t.push(e[n].x);this.setScreensX(t)};h.prototype.moveLeft=function(){var e=p(this.getScreens().length,this.getCurrentScreen(),"left");if(e){var t=this,n=t.getCurrentScreen(),r=t.getStage(),i=new TimelineLite,s=t.getScreensX()[t.getCurrentScreen()-1];i.to(r,.2,{x:-s,ease:"Power4.easeInOut"}).call(function(){r.x=-s;t.setCurrentStageX(r.x);n>0&&t.setCurrentScreen(n-1)})}};h.prototype.moveRight=function(){var e=p(this.getScreens().length,this.getCurrentScreen(),"right");if(e){var t=this,n=t.getCurrentScreen(),r=t.getStage(),i=new TimelineLite,s=t.getScreensX()[t.getCurrentScreen()+1];i.to(r,.2,{x:-s,ease:"Power4.easeInOut"}).call(function(){r.x=-s;t.setCurrentStageX(r.x);t.setCurrentScreen(n+1)})}};s._class("iwg.lib.Swipe",h)})(window);
