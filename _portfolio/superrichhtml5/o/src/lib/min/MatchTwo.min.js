(function(e){"use strict";function h(e){d(e,e.getTicketData());var t=e.getTurns();for(var n in t){var r=v(e,t[n],e.getY()),i=e.getTurnArray();i.push(r[0]);e.setTurnArray(i)}p(e)}function p(e){var t=u.makeBitmapImage("game3and4_divs",{x:515,y:225}),n=u.makeBitmapImage("game3and4_divs",{x:515,y:320}),r=u.makeBitmapImage("row1",{x:508,y:150}),i=u.makeBitmapImage("row2",{x:508,y:250}),s=u.makeBitmapImage("row3",{x:508,y:340});e.getSlide().addChild(t,n,r,i,s)}function d(e,t){var n=[t.turn[0],t.turn[1],t.turn[2]];e.setTurns(n)}function v(e,t,n){var r=t.n,i=null;u.contains(r,0)?i="game3and4_highlight_a":u.contains(r,1)?i="game3and4_highlight_b":u.contains(r,2)&&(i="game3and4_highlight_c");var s=[],o=[],l=t.v,c=u.makeBitmapImage(i,{x:-42,y:6},0),h=new createjs.Container;h.name="gameContainer";h.isRevealed=!1;h.x=e.getX();h.y=e.getY();h.addChild(c);var p=l.split("|"),d=p[0].split(","),v=p[1],y=e.getGapY(),w=e.getGapX();for(var E in d){var S=new createjs.Container,x=new createjs.Container,T=w*E;x.name="maskContainer";var N=m(e,d[E]),C=u.makeBitmapImage("game4_symbol_start",{x:51,y:53}),k=u.makeBitmapImage(N,{x:0,y:0},0),L=u.makeShimmer(a.moneyBag,{x:0,y:790},{startX:-80,endX:140,y:0,scale:.6});S.x=T;S.num=E;var A={reveal:g},O=new f(S,{isWinner:t.w},A);O.name="gameAsset";o.push(O);x.addChild(L);S.addChild(k,C,x);h.addChild(S)}var M=new createjs.Container,x=new createjs.Container,_=u.makeBitmapImage("word_prize",{x:265,y:57},1),D=u.makeBitmapImage(u.checkObject(a.PRIZETABLE,v),{x:271,y:51},0);M.num=2;x.name="maskContainer";var P={reveal:g},H=new f(M,{isWinner:t.w},P);H.setName("prizeAsset");o.push(H);var L=u.makeShimmer(a.prize,{x:200,y:820},{startX:60,endX:290,y:0,scale:.6});x.addChild(L);M.addChild(D,_,x);h.addChild(M);h.on("click",function(n){u.stopPrompt();a.clickCount++;if(h.isRevealed===!1){h.isRevealed=!0;var r=n.target;while(r.parent){if(r.num)break;r=r.parent}if(o[r.num].getIsRevealed()==0){var i=200;for(var s=0;s<o.length;s++)if(o[s].getIsRevealed()===!1){s===o.length-1&&(i=300);o[s].reveal("reveal",o[s],(s+1)*i);var f=o[s].getContainer();f.removeChild(f.getChildByName("maskContainer"))}}e.isFinished();e.checkMatchTwoWin(h,t,p[1]);b("Pop")}},null,!0);e.getSlide().addChild(h);e.setY(e.getY()+e.getGapY());return[h,o]}function m(e,t){if(e.getRef().hasOwnProperty(t)){var n=e.getRef()[t];return n}throw"sorry there seems to be a problem - error code 10"}function g(){this.setIsRevealed(!0);if(this.getContainer()){var e=this.getContainer(),t=e.children[1],n=e.children[0],i=e.parent.y,s=e.parent.x,o=[],f=e.children[1].clone();f.scaleX=f.scaleY=0;f.x=s+e.x+f.x;t.y>i?f.y=t.y-15:f.y=i+45;var l=f.x,c=f.y;for(var h=0;h<=5;h++){var p=u.makeBitmapImage("shiner",{x:l,y:c},1);a.RIGHTGAMEWINDOW.addChild(p);o.push(p)}TweenLite.to(o[0],.8,{bezier:[{x:l,y:c},{x:l-30,y:c-30},{x:l-60,y:c+30}],alpha:0});TweenLite.to(o[1],.8,{bezier:[{x:l,y:c},{x:l-20,y:c-40},{x:l-40,y:c+30}],alpha:0});TweenLite.to(o[2],.8,{bezier:[{x:l,y:c},{x:l-10,y:c-50},{x:l-20,y:c+30}],alpha:0});TweenLite.to(o[3],.8,{bezier:[{x:l,y:c},{x:l+10,y:c-50},{x:l+20,y:c+30}],alpha:0});TweenLite.to(o[4],.8,{bezier:[{x:l,y:c},{x:l+20,y:c-40},{x:l+40,y:c+30}],alpha:0});TweenLite.to(o[5],.8,{bezier:[{x:l,y:c},{x:l+30,y:c-30},{x:l+60,y:c+30}],alpha:0});TweenLite.to(t,.3,{delay:0,scaleY:0,scaleX:0});TweenLite.to(n,.3,{delay:0,alpha:1});TweenLite.to(f,.3,{delay:0,alpha:.8,scaleY:1.4,scaleX:1.4,y:f.y+20});TweenLite.to(f,.3,{delay:.15,alpha:0});a.RIGHTGAMEWINDOW.addChild(f)}else r.IWG.ame("error",{mes:["couldnt get icon Container - error code 03a1"]})}function y(){createjs.Sound.play("glossy_success_19")}function b(e){createjs.Sound.play(e);createjs.Sound.play(e,"",200);createjs.Sound.play(e,"",500);setTimeout(function(){a.clickCount--;l.RESETPROMPT.param=a.clickCount;i.IWGEM.dispatchEvent(l.RESETPROMPT)},1e3)}var t,n=e.com.camelot,r=n.core,i=n.iwg,s=i.lib,o=e.com.greensock,u=s.Helper,a=s.R,f=s.GameAsset,l=s.MEvent,c=function(e,t,n,r,i,s){var o=e,u=t,a=n,f=r,l=i,c=s,p=[],d=[],v={0:"game4_symbol_car",1:"game4_symbol_cards",2:"game4_symbol_champagne",3:"game4_symbol_crown",4:"game4_symbol_plane",5:"game4_symbol_ring",6:"game4_symbol_wallet",7:"game4_symbol_watch"},m=!1;this.getX=function(){return o};this.getY=function(){return u};this.getGapY=function(){return a};this.getGapX=function(){return f};this.getSlide=function(){return l};this.getTicketData=function(){return c};this.getTurns=function(){return p};this.getTurnArray=function(){return d};this.getRef=function(){return v};this.getIsFinished=function(){return m};this.setX=function(e){o=e};this.setY=function(e){u=e};this.setGapY=function(e){a=e};this.setGapX=function(e){f=e};this.setSlide=function(e){l=e};this.setTurns=function(e){p=e};this.setTurnArray=function(e){return d};this.setIsFinished=function(e){m=e};h(this)};c.prototype.checkMatchTwoWin=function(e,t,n){var i=t.w,s=n;if(i==="1"){r.IWG.ame("bank",{deposit:[n],log:!0});var o=e.children[0],u=new TimelineMax({delay:1,repeat:4,yoyo:!0,onStart:y});u.to(o,.7,{alpha:.95,ease:"easeIn"})}};c.prototype.isFinished=function(){var e=this.getTurnArray(),t=!1;for(var n in e)if(e[n]){if(e[n].isRevealed===!1){t=!1;break}t=!0}if(t){this.setIsFinished(!0);i.IWGEM.dispatchEvent(l.CHECKENDGAME)}};i._class("iwg.lib.MatchTwo",c)})(window);
