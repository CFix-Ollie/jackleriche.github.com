(function(e){"use strict";function d(e){v(e);f.instance.getCurrentScreen()===0&&setTimeout(function(){f.instance.moveRight()},1e3);a.LOCK=!0;i.IWGEM.addEventListener(c.ENDGAMEINTRO.type,m)}function v(e){var t=new createjs.Container,n=u.makeBitmapImage("box_endgame",{x:430,y:92},1);t.x=50;t.y=a.GAMEHEIGHT+200;var i=r.IWG.ame("bank",{balance:"finalAmount",raw:!0,log:!0}),s=null,o=new createjs.Container,f=null,l=null,c=new createjs.Container,p=u.makeBitmapImage("button_finish",{x:360,y:120},1),d=u.makeBitmapImage("button_finish_over",{x:360,y:120},1);c.addEventListener("click",function(){r.IWG.ame("closeGame")});if(r.IWG.ame("get",{vars:["iwgIsWager"]})===!0)if(h.instance.getIsWinner()==="1"){var v="endgame_win_"+i;s=u.makeBitmapImage("endgame_congratulations",{x:160,y:35},1);f=u.makeBitmapImage("endgame_youhavewon",{x:90,y:0},1);if(i===1208e3){f.x=-145;v="endgame_win_topprize"}l=u.makeBitmapImage(v,{x:500,y:35},1);switch(i.toString().length){case 4:f.x=70;l.x=505;break;case 5:f.x=60;l.x=505;break;case 7:l.x=225;l.y=0}}else h.instance.getIsWinner()==="0"&&(s=u.makeBitmapImage("endgame_lose",{x:160,y:35},1));c.addChild(d,p);o.addChild(f,l);o.x=30;o.y=70;t.addChild(n,c,s,o);e.setEndGameContainer(t);a.RIGHTGAMEWINDOW.addChild(t)}function m(){var e=p.instance,t=e.getEndGameContainer(),n=t.children[1].children[1];TweenLite.to(a.RIGHTGAMEWINDOW,.8,{delay:1.8,y:-80});TweenLite.to(t,.8,{delay:1.8,y:460,onStart:g,onComplete:y});var r=new TimelineMax({delay:1,repeat:5,yoyo:!0});r.to(n,.8,{alpha:0,ease:"easeIn"})}function g(){h.instance.getIsWinner()==="1"?createjs.Sound.play("Win_zing"):createjs.Sound.play("Level_fail")}function y(){a.LOCK=!1}var t,n=e.com.camelot,r=n.core,i=n.iwg,s=i.lib,o=e.com.greensock,u=s.Helper,a=s.R,f=s.Swipe,l=s.GameAsset,c=s.MEvent,h=s.Ticket,p=function(){if(typeof p.instance=="object")return p.instance;var e=null,t=null;this.getCurrentScreen=function(){return e};this.getEndGameContainer=function(){return t};this.setCurrentScreen=function(t){e=t};this.setEndGameContainer=function(e){t=e};p.instance=this;d(this)};i._class("iwg.lib.EndGame",p)})(window);
