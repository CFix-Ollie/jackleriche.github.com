(function(e){function h(e,t,n){var r=null,i=e-1;return t>0&&n==="left"?!0:t<i&&n==="right"?!0:!1}function p(e){var t=e-1,n=e+1;t<0&&(t=null);return[t,n]}var t,n=e.com.camelot,r=n.core,i=r.IWGBank,s=n.iwg,o=s.lib,u=o.MEvent,a=e.com.camelot.iwg.lib.R,f=e.com.greensock,l=Hammer(s.iwgCanvas,{prevent_default:!0}),c=function(e){var t=!1,n=null,r=e,i=null,s=null,o=null,u=null,a=null,f=!1,l=null,c=null,h=!1,p=.96,d=null,v=null,m=20,g=0,y=!1,b=0,w=0,E=null,S=null;this.getStage=function(){return r};this.getIsChecking=function(){return y};this.getEnabled=function(){return t};this.getEle=function(){return n};this.getTargetHeight=function(){return o};this.getTargetWidth=function(){return s};this.getCurrentScreen=function(){return u};this.getLock=function(){return f};this.getPlaceholderX=function(){return l};this.getPlaceholderY=function(){return c};this.getFlag=function(){return h};this.getLowerBound=function(){return d};this.getUpperBound=function(){return v};this.getiWidth=function(){return i};this.getPercentage=function(){return m};this.getCurrentStageX=function(){return g};this.getFriction=function(){return p};this.getScreensX=function(){return a};this.getStartX=function(){return w};this.getDragDirection=function(){return E};this.getDragDistance=function(){return S};this.getBuffer=function(){return b};this.setEnabled=function(e){typeof e=="boolean"&&(t=e)};this.setCurrentScreen=function(e){u=e};this.setEle=function(e){n=e};this.setStage=function(e){r=e};this.setTargetWidth=function(e){s=e};this.setTargetHeight=function(e){o=e};this.setLock=function(e){f=e};this.setPlaceholderX=function(e){l=e};this.setPlaceholderY=function(e){c=e};this.setFlag=function(e){h=e};this.setLowerBound=function(e){d=e};this.setUpperBound=function(e){v=e};this.setiWidth=function(e){i=e};this.setCurrentStageX=function(e){g=e};this.setFriction=function(e){p=e};this.setScreensX=function(e){a=e};this.setStartX=function(e){w=e};this.setDragDirection=function(e){E=e};this.setDragDistance=function(e){S=e};this.setIsChecking=function(e){y=e};this.setBuffer=function(e){b=e}};c.prototype.enabled=function(e,t,n,r){var i=this,o=n.getBounds();this.setEnabled(e);this.setEle(t);this.setStage(n);this.setBuffer(r);this.setCurrentScreen(0);this.setTargetWidth(o.width);this.setTargetHeight(o.height);this.setBounds();this.setScreenPositions();if(this.getEnabled()){var i=this;l.on("drag",function(e){if(a.LOCK===!1){i.setDragDirection(e.gesture.direction);i.setDragDistance(e.gesture.deltaX);i.setStartX(e.gesture.startEvent.center.pageX);var t=0;t=i.getCurrentStageX()+i.getDragDistance();t<-i.getLowerBound()&&t>-i.getUpperBound()-360&&(i.getDragDirection()==="right"?i.getDragDistance()>i.getBuffer()?a.MAINGAMECONTAINER.x=t-i.getBuffer():t=0:i.getDragDistance()<-i.getBuffer()?a.MAINGAMECONTAINER.x=t+i.getBuffer():t=0)}});l.on("dragend",function(e){i.setFlag(null);var t=i.getDragDistance(),n=i.getStage();if(n.x>0)i.returnToZero();else if(n.x<-i.getUpperBound())i.returnToEnd();else{i.setCurrentStageX(n.x);var r=i.getCurrentScreen(),o=p(r),a=i.getScreensX(),f=null,l=null;o[0]!==null&&(f=a[o[0]]);o[1]!==null&&(l=a[o[1]]);var c=new TimelineLite;if(t<0&&t<-(l/8)){i.moveRight();s.IWGEM.dispatchEvent(u.MOVERIGHT)}else if(t>0&&t>f/8){i.moveLeft();s.IWGEM.dispatchEvent(u.MOVELEFT)}else{var h=i.getScreensX()[i.getCurrentScreen()];c.to(n,.2,{x:-h,ease:"Power4.easeInOut"}).call(function(){n.x=-h;i.setCurrentStageX(n.x);i.setCurrentScreen(r)})}}})}};c.prototype.setDimensions=function(){var e=this.getTarget();this.setTargetWidth(e.width);this.setTargetHeight(e.height)};c.prototype.lock=function(){if(this.getLock===!0){console.warn("Swipe is already set to lock");return!1}this.setLock(!0)};c.prototype.setBounds=function(){var e=this.getTargetWidth(),t=this.getScreens(this.getStage()).length,n=Math.round(e/t),r=n/100*this.getPercentage();this.setiWidth(n);this.setLowerBound(0-r);var i=t-1,s=i*n;this.setUpperBound(s)};c.prototype.getScreens=function(){var e=this.getStage();return e.children};c.prototype.returnToZero=function(){var e=this.getStage(),t=new TimelineLite;t.to(e,.2,{x:0,ease:"Power4.easeInOut"}).call(function(){e.x=0});this.setCurrentStageX(0)};c.prototype.setCurrentScreen=function(e){var t=this.getCurrentScreen(),n=t+e;this.setCurrentScreen(n)};c.prototype.returnToEnd=function(){var e=this.getStage(),t=this,n=new TimelineLite;n.to(e,.2,{x:-a.RIGHTWINDOWSTARTX,ease:"Power4.easeInOut"}).call(function(){e.x=-a.RIGHTWINDOWSTARTX});this.setCurrentStageX(-a.RIGHTWINDOWSTARTX);this.setCurrentScreen(t.getCurrentScreen())};c.prototype.setScreenPositions=function(){var e=this.getStage().children,t=[];for(var n in e)t.push(e[n].x);this.setScreensX(t)};c.prototype.moveLeft=function(){s.IWGEM.dispatchEvent(u.ENABLETOUCH);var e=h(this.getScreens().length,this.getCurrentScreen(),"left");if(e){var t=this,n=t.getCurrentScreen(),r=t.getStage(),i=new TimelineLite,o=t.getScreensX()[t.getCurrentScreen()-1];i.to(r,.2,{x:-o,ease:"Power4.easeInOut"}).call(function(){r.x=-o;t.setCurrentStageX(r.x);n>0&&t.setCurrentScreen(n-1)})}};c.prototype.moveRight=function(){s.IWGEM.dispatchEvent(u.DISABLETOUCH);var e=h(this.getScreens().length,this.getCurrentScreen(),"right");if(e){a.simGame=!1;var t=this,n=t.getCurrentScreen(),r=t.getStage(),i=new TimelineLite,o=t.getScreensX()[t.getCurrentScreen()+1];i.to(r,.2,{x:-o,ease:"Power4.easeInOut"}).call(function(){r.x=-o;t.setCurrentStageX(r.x);t.setCurrentScreen(n+1)})}};s._class("iwg.lib.Swipe",c)})(window);
