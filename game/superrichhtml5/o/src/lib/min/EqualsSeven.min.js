(function(e){"use strict";function h(e){d(e,e.getTicketData());var t=e.getTurnData();for(var n in t){var r=v(e,t[n],e.getY()),i=e.getTurnArray();i.push(r[0]);e.setTurnArray(i)}p(e)}function p(e){var t=u.makeBitmapImage("game3and4_divs",{x:100,y:225}),n=u.makeBitmapImage("game3and4_divs",{x:100,y:320}),r=u.makeBitmapImage("row1",{x:95,y:150}),i=u.makeBitmapImage("row2",{x:95,y:250}),s=u.makeBitmapImage("row3",{x:95,y:340}),o=u.makeBitmapImage("game3_plus",{x:170,y:150}),a=u.makeBitmapImage("game3_plus",{x:170,y:250}),f=u.makeBitmapImage("game3_plus",{x:170,y:345}),l=u.makeBitmapImage("game3_equals",{x:250,y:150}),c=u.makeBitmapImage("game3_equals",{x:250,y:250}),h=u.makeBitmapImage("game3_equals",{x:250,y:345});e.getSlide().addChild(t,n,r,i,s,o,a,f,l,c,h)}function d(e,t){var n=[t.turn[0],t.turn[1],t.turn[2]];e.setTurnData(n)}function v(e,t,n){var r=t.n,i=null;u.contains(r,3)?i="game3and4_highlight_a":u.contains(r,4)?i="game3and4_highlight_b":u.contains(r,5)&&(i="game3and4_highlight_c");var s=[],o=[],l=t.v,c=u.makeBitmapImage(i,{x:-42,y:6},0),h=new createjs.Container;h.name="gameContainer";h.isRevealed=!1;h.x=e.getX();h.y=e.getY();h.addChild(c);var p=l.split("|"),d=p[0].split(","),v=p[1],g=e.getGapY(),b=e.getGapX();for(var w in d){var E=new createjs.Container,S=new createjs.Container,x=b*w;S.name="maskContainer";var T="game3_"+d[w],N=null;if(w<2){var C=u.makeBitmapImage("game3_symbol_start",{x:42,y:67}),k=u.makeBitmapImage(T,{x:0,y:30},0);N=u.makeShimmer(a.poundMask,{x:0,y:800},{startX:-140,endX:100,y:0,scale:.6});N.name="shimmer"}else var C=u.makeBitmapImage("game3_question",{x:30,y:60}),k=u.makeBitmapImage(T,{x:0,y:30},0);E.x=x;E.num=w;var L={reveal:m},A=new f(E,{isWinner:t.w},L);A.name="gameAsset";o.push(A);S.addChild(N);E.addChild(k,C,S);h.addChild(E)}var O=new createjs.Container,S=new createjs.Container,M=u.makeBitmapImage("word_prize",{x:265,y:55},1),_=u.makeBitmapImage(u.checkObject(a.PRIZETABLE,v),{x:271,y:60},0);O.num=3;S.name="maskContainer";var D={reveal:m},P=new f(O,{isWinner:t.w},D);P.name="prizeAsset";o.push(P);var N=u.makeShimmer(a.prize,{x:210,y:820},{startX:50,endX:310,y:0,scale:.6});N.name="shimmer";S.addChild(N);O.addChild(_,M,S);h.addChild(O);h.on("click",function(n){u.stopPrompt();a.clickCount++;if(h.isRevealed===!1){h.isRevealed=!0;var r=n.target;if(r.name==="shimmer")return!1;while(r.parent){if(r.num)break;r=r.parent}if(o[r.num].getIsRevealed()==0){var i=200;for(var s=0;s<o.length;s++)if(o[s].getIsRevealed()===!1){s===o.length-1&&(i=300);o[s].reveal("reveal",o[s],(s+1)*i);var f=o[s].getContainer();f.removeChild(f.getChildByName("maskContainer"))}}y("Pop");e.isFinished();e.checkEqualsSevenWin(h,t,p[1])}},null,!0);e.getSlide().addChild(h);e.setY(e.getY()+e.getGapY());return[h,o]}function m(){this.setIsRevealed(!0);if(this.getContainer()){var e=this.getContainer(),t=e.children[1],n=e.children[0],i=e.parent.y,s=e.parent.x,o=[],f=e.children[1].clone();f.scaleX=f.scaleY=0;f.x=s+e.x+f.x;t.y>i?f.y=t.y-15:f.y=i+45;var l=f.x,c=f.y;for(var h=0;h<=5;h++){var p=u.makeBitmapImage("shiner",{x:l,y:c},1);a.RIGHTGAMEWINDOW.addChild(p);o.push(p)}TweenLite.to(o[0],.8,{bezier:[{x:l,y:c},{x:l-30,y:c-30},{x:l-60,y:c+30}],alpha:0});TweenLite.to(o[1],.8,{bezier:[{x:l,y:c},{x:l-20,y:c-40},{x:l-40,y:c+30}],alpha:0});TweenLite.to(o[2],.8,{bezier:[{x:l,y:c},{x:l-10,y:c-50},{x:l-20,y:c+30}],alpha:0});TweenLite.to(o[3],.8,{bezier:[{x:l,y:c},{x:l+10,y:c-50},{x:l+20,y:c+30}],alpha:0});TweenLite.to(o[4],.8,{bezier:[{x:l,y:c},{x:l+20,y:c-40},{x:l+40,y:c+30}],alpha:0});TweenLite.to(o[5],.8,{bezier:[{x:l,y:c},{x:l+30,y:c-30},{x:l+60,y:c+30}],alpha:0});TweenLite.to(t,.3,{delay:0,scaleY:0,scaleX:0});TweenLite.to(n,.3,{delay:0,alpha:1});TweenLite.to(f,.3,{delay:0,alpha:.8,scaleY:1.4,scaleX:1.4,y:f.y+20});TweenLite.to(f,.3,{delay:.15,alpha:0});a.RIGHTGAMEWINDOW.addChild(f)}else r.IWG.ame("error",{mess:["couldnt get icon Container - error code 02a1"]})}function g(){createjs.Sound.play("glossy_success_19")}function y(e){if(r.iwgLoadQ.getResult(e)!==undefined&&r.iwgLoadQ.getResult(e)!==null){createjs.Sound.play(e);createjs.Sound.play(e,"",200);createjs.Sound.play(e,"",400);createjs.Sound.play(e,"",800)}setTimeout(function(){a.clickCount--;l.RESETPROMPT.param=a.clickCount;i.IWGEM.dispatchEvent(l.RESETPROMPT)},1e3)}var t,n=e.com.camelot,r=n.core,i=n.iwg,s=i.lib,o=e.com.greensock,u=s.Helper,a=s.R,f=s.GameAsset,l=s.MEvent,c=function(e,t,n,r,i,s){var o=e,u=t,a=n,f=r,l=i,c=s,p=[],d=[],v=!1;this.getX=function(){return o};this.getY=function(){return u};this.getGapY=function(){return a};this.getGapX=function(){return f};this.getSlide=function(){return l};this.getTicketData=function(){return c};this.getTurnData=function(){return p};this.getTurnArray=function(){return d};this.getIsFinished=function(){return v};this.setX=function(e){o=e};this.setY=function(e){u=e};this.setGapY=function(e){a=e};this.setGapX=function(e){f=e};this.setSlide=function(e){l=e};this.setTurnData=function(e){p=e};this.setTurnArray=function(e){return d};this.setIsFinished=function(e){v=e};h(this)};c.prototype.checkEqualsSevenWin=function(e,t,n){var i=t.w,s=n;if(i==="1"){r.IWG.ame("bank",{deposit:[n],log:!0});var o=e.children[0],u=new TimelineMax({delay:1,repeat:4,yoyo:!0,onStart:g});u.to(o,.7,{alpha:1,ease:"easeIn"})}};c.prototype.isFinished=function(){var e=this.getTurnArray(),t=!1;for(var n in e)if(e[n]){if(e[n].isRevealed===!1){t=!1;break}t=!0}if(t){this.setIsFinished(!0);i.IWGEM.dispatchEvent(l.CHECKENDGAME)}};i._class("iwg.lib.EqualsSeven",c)})(window);
