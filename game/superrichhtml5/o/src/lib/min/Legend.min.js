/**
	 * Legend
	 * Used to show and manage the game legend / prize table. All interaction with the
	 * Legend is through this class, and any prizes won will be recorded via the static bank
	 * class.
	 * @author E-scape Interactive
	 * @version 1.0
 **/(function(e){"use strict";var t,n=e.com.camelot,r=n.iwg,i=r.lib,s=i.MEvent,o=e.com.camelot.iwg.lib.R,u=n.core,a=[],f=!0,l=3,c=600,h=3,p=30,d=!1,v=!1,m=function(){if(typeof m.instance=="object")return m.instance;var e=[];this.getRevealArray=function(){return e};this.getRevealDelay=function(){return c};this.getSequentialReveal=function(){return f};this.setRevealArray=function(t){e=t};m.instance=this};m.prototype.isSequentialReveal=function(){return this._isSequentialReveal};m.prototype.pushLegendRow=function(e,t){var n=new Array(e,t);a.push(n)};m.prototype.updateLegend=function(e,t,n){var i,o=t,u,f,l=0;for(var h=0;h<a.length;h++){f=a[h][1].length;u=0;for(var p=0;p<f;p++){i=a[h][1][p];if(i.getIsRevealed()===!0)u++;else if(parseInt(e)===i.getTicketLabel()){l++;i.setIsRevealed(!0);i.reveal("reveal",i,l*this.getRevealDelay());var d=this.getRevealArray();d.push(i);this.setRevealArray(d);u++;this.getSequentialReveal()&&(o+=c)}}if(u==f&&a[h][0].getWinReveal()===!1){var v=a[h][0];v.reveal("winPrizeReveal",v,l*500+1e3);for(p=0;p<f;p++){var i=a[h][1][p];i.reveal("winReveal",i,l*500+1e3)}}var m=this}n&&typeof n=="function"&&n();r.IWGEM.dispatchEvent(s.ADDTURN);setTimeout(function(){r.IWGEM.dispatchEvent(s.LEGENDENDTURN)},o)};r._class("iwg.lib.Legend",m)})(window);
