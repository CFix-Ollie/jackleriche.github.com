!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1);var r=n(22),o={};window.gifConfig&&(o=window.gifConfig,delete window.gifConfig),window.gameIntegrationFramework=new r(o)},function(t,e,n){"use strict";n(2),n(21)},function(t,e,n){"use strict";n(3)()||Object.defineProperty(n(4),"Symbol",{value:n(5),configurable:!0,enumerable:!1,writable:!0})},function(t,e){"use strict";var n={object:!0,symbol:!0};t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!n[typeof Symbol.iterator]&&(!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag])}},function(t,e){"use strict";t.exports=new Function("return this")()},function(t,e,n){"use strict";var r,o,i,s,a=n(6),c=n(19),u=Object.create,f=Object.defineProperties,l=Object.defineProperty,p=Object.prototype,h=u(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),s=!0}catch(t){}}var d=function(){var t=u(null);return function(e){for(var n,r,o=0;t[e+(o||"")];)++o;return e+=o||"",t[e]=!0,n="@@"+e,l(p,n,a.gs(null,function(t){r||(r=!0,l(this,n,a(t)),r=!1)})),n}}();i=function(t){if(this instanceof i)throw new TypeError("TypeError: Symbol is not a constructor");return o(t)},t.exports=o=function t(e){var n;if(this instanceof t)throw new TypeError("TypeError: Symbol is not a constructor");return s?r(e):(n=u(i.prototype),e=void 0===e?"":String(e),f(n,{__description__:a("",e),__name__:a("",d(e))}))},f(o,{for:a(function(t){return h[t]?h[t]:h[t]=o(String(t))}),keyFor:a(function(t){var e;c(t);for(e in h)if(h[e]===t)return e}),hasInstance:a("",r&&r.hasInstance||o("hasInstance")),isConcatSpreadable:a("",r&&r.isConcatSpreadable||o("isConcatSpreadable")),iterator:a("",r&&r.iterator||o("iterator")),match:a("",r&&r.match||o("match")),replace:a("",r&&r.replace||o("replace")),search:a("",r&&r.search||o("search")),species:a("",r&&r.species||o("species")),split:a("",r&&r.split||o("split")),toPrimitive:a("",r&&r.toPrimitive||o("toPrimitive")),toStringTag:a("",r&&r.toStringTag||o("toStringTag")),unscopables:a("",r&&r.unscopables||o("unscopables"))}),f(i.prototype,{constructor:a(o),toString:a("",function(){return this.__name__})}),f(o.prototype,{toString:a(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:a(function(){return c(this)})}),l(o.prototype,o.toPrimitive,a("",function(){var t=c(this);return"symbol"==typeof t?t:t.toString()})),l(o.prototype,o.toStringTag,a("c","Symbol")),l(i.prototype,o.toStringTag,a("c",o.prototype[o.toStringTag])),l(i.prototype,o.toPrimitive,a("c",o.prototype[o.toPrimitive]))},function(t,e,n){"use strict";var r,o=n(7),i=n(14),s=n(15),a=n(16);r=t.exports=function(t,e){var n,r,s,c,u;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],null==t?(n=s=!0,r=!1):(n=a.call(t,"c"),r=a.call(t,"e"),s=a.call(t,"w")),u={value:e,configurable:n,enumerable:r,writable:s},c?o(i(c),u):u},r.gs=function(t,e,n){var r,c,u,f;return"string"!=typeof t?(u=n,n=e,e=t,t=null):u=arguments[3],null==e?e=void 0:s(e)?null==n?n=void 0:s(n)||(u=n,n=void 0):(u=e,e=n=void 0),null==t?(r=!0,c=!1):(r=a.call(t,"c"),c=a.call(t,"e")),f={get:e,set:n,configurable:r,enumerable:c},u?o(i(u),f):f}},function(t,e,n){"use strict";t.exports=n(8)()?Object.assign:n(9)},function(t,e){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(10),o=n(13),i=Math.max;t.exports=function(t,e){var n,s,a,c=i(arguments.length,2);for(t=Object(o(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},s=1;s<c;++s)e=arguments[s],r(e).forEach(a);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(11)()?Object.keys:n(12)},function(t,e){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e){"use strict";var n=Object.keys;t.exports=function(t){return n(null==t?t:Object(t))}},function(t,e){"use strict";t.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},function(t,e){"use strict";var n=Array.prototype.forEach,r=Object.create,o=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=r(null);return n.call(arguments,function(t){null!=t&&o(Object(t),e)}),e}},function(t,e){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";t.exports=n(17)()?String.prototype.contains:n(18)},function(t,e){"use strict";var n="razdwatrzy";t.exports=function(){return"function"==typeof n.contains&&(n.contains("dwa")===!0&&n.contains("foo")===!1)}},function(t,e){"use strict";var n=String.prototype.indexOf;t.exports=function(t){return n.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";var r=n(20);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}},function(t,e){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},function(t,e){(function(t){!function(t){"use strict";function e(t){return Object(t)===t}if(!t.WeakMap){var n=Object.prototype.hasOwnProperty,r=function(t,e,n){Object.defineProperty?Object.defineProperty(t,e,{configurable:!0,writable:!0,value:n}):t[e]=n};t.WeakMap=function(){function t(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(r(this,"_id",i("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function o(t,r){if(!e(t)||!n.call(t,"_id"))throw new TypeError(r+" method called on incompatible receiver "+typeof t)}function i(t){return t+"_"+s()+"."+s()}function s(){return Math.random().toString().substring(2)}return r(t.prototype,"delete",function(t){if(o(this,"delete"),!e(t))return!1;var n=t[this._id];return!(!n||n[0]!==t)&&(delete t[this._id],!0)}),r(t.prototype,"get",function(t){if(o(this,"get"),e(t)){var n=t[this._id];return n&&n[0]===t?n[1]:void 0}}),r(t.prototype,"has",function(t){if(o(this,"has"),!e(t))return!1;var n=t[this._id];return!(!n||n[0]!==t)}),r(t.prototype,"set",function(t,n){if(o(this,"set"),!e(t))throw new TypeError("Invalid value used as weak map key");var i=t[this._id];return i&&i[0]===t?(i[1]=n,this):(r(t,this._id,[t,n]),this)}),r(t,"_polyfill",!0),t}()}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:this)}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){Object.defineProperty(this,"id",a(i.fn.uuid(),!1));var e=new o(t);c.set(this.id,e)}var o=n(23),i=n(24),s=n(48),a=n(47),c=new s;r.prototype.handleOverlay=function(){var t=c.get(this.id);t.handleOverlay.apply(this,Array.prototype.slice.call(arguments))},r.prototype.start=function(t){var e=c.get(this.id);e.start(t)},o.Public=r,t.exports=o.Public},function(t,e,n){"use strict";function r(t){var e=this,n=new u,o=new l(t,r.defaults),c=(o.configuration("game"),o.string("basePath"));if(Object.defineProperty(this,"config",p(o,!1)),Object.defineProperty(this,"bus",p(n,!1)),Object.defineProperty(this,"webCaller",p(new i(n,o.configuration("webCaller")),!1)),o.boolean("test")){var h=o.value("generator");Object.defineProperty(this,"ticketGenerator",p(new s.TicketGenerator(n,new h),!1))}else Object.defineProperty(this,"ticketManager",p(new s(n,o.configuration("ticket")),!1));Object.defineProperty(this,"gameManager",p(new a(n,o.configuration("game"),c),!1)),Object.defineProperty(this,"overlayManager",p(new f(n,(void 0),o.configuration("overlay")),!1)),Object.defineProperty(this,"basePath",p(c,!1)),n.subscribe("game.finish",function(){window.location=e.config.string("finishURL")})}var o=n(24),i=n(30),s=n(36),a=n(39),c=n(40),u=n(41),f=n(44),l=(n(32),n(31)),p=n(47);r.defaults={baseUrl:window.location.host,finishUrl:window.location.host,ticket:s.defaults,webCaller:i.defaults,overlay:f.defaults,test:!1,game:a.defaults},r.prototype.start=function(t){var e=this.config.boolean("game.old"),n=this.config.boolean("game.config.log"),r=new c(this.bus,n);return e?void!function(e,n){var r=o.fn.uuid();n.getTicket().then(function(o){return new t({basePath:e.config.basePath,ticket:o,finishURL:window.location+"#"+r,mediator:n})}),window.addEventListener("hashchange",function(){window.location.hash.indexOf(r)!==-1&&n.finishGame()},!1)}(this,r):new t(this.basePath,r)},t.exports=r},function(t,e,n){"use strict";function r(t,e){Object.keys(t).forEach(function(n){e(t[n],n,t)})}function o(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function i(t){return t.catch=function(e){return t.then(void 0,e)},t}function s(){var t=n(25);return t(i)}function a(t,e){return function(){t.apply(e,arguments)}}var c={};c.uuid=o,c.fn={},c.fn.forEachInObject=r,c.fn.uuid=o,c.fn.contextualize=a,c.fn.createPromise=s,c.fn.objectMerge=n(29),c.Promise=s,t.exports=c},function(t,e,n){(function(t,e,n){!function(t){function r(t){return"function"==typeof t}function o(t){return"object"==typeof t}function i(t){"undefined"!=typeof e?e(t):"undefined"!=typeof n&&n.nextTick?n.nextTick(t):setTimeout(t,0)}var s;t[0][t[1]]=function t(e){var n,a=[],c=[],u=function(t,e){return null==n&&null!=t&&(n=t,a=e,c.length&&i(function(){for(var t=0;t<c.length;t++)c[t]()})),n};return u.then=function(u,f){var l=t(e),p=function(){function t(e){var n,i=0;try{if(e&&(o(e)||r(e))&&r(n=e.then)){if(e===l)throw new TypeError;n.call(e,function(){i++||t.apply(s,arguments)},function(t){i++||l(!1,[t])})}else l(!0,arguments)}catch(t){i++||l(!1,[t])}}try{var e=n?u:f;r(e)?t(e.apply(s,a||[])):l(n,a)}catch(t){l(!1,[t])}};return null!=n?i(p):c.push(p),l},e&&(u=e(u)),u}}([t,"exports"])}).call(e,n(26)(t),n(27).setImmediate,n(28))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){(function(t,r){function o(t,e){this._id=t,this._clearFn=e}var i=n(28).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,c={},u=0;e.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=u++,r=!(arguments.length<2)&&a.call(arguments,1);return c[n]=!0,i(function(){c[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete c[t]}}).call(e,n(27).setImmediate,n(27).clearImmediate)},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function s(){y&&h&&(y=!1,h.length?d=h.concat(d):b=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(h=d,d=[];++b<e;)h&&h[b].run();b=-1,e=d.length}h=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var f,l,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var h,d=[],y=!1,b=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(t,e){"use strict";function n(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}t.exports=n},function(t,e,n){"use strict";function r(t,e){return{code:t,message:e}}function o(t,e){Object.defineProperties(this,{bus:{value:t,writable:!1},endpoints:{value:[],writable:!1},config:{value:new u(e,o.defaults),writable:!1}}),t.subscribe("webcaller.add",c.fn.contextualize(this.addEndpoint,this)),t.subscribe("webcaller.call",c.fn.contextualize(this.callEndpoint,this))}function i(t){return!!l.hash(t)&&!(l.empty(t.name)||l.empty(t.url)||l.empty(t.method))}function s(t,e){return function(n){return t.request(c.fn.objectMerge(e,n))}}var a,c=n(24),u=n(31),f=n(33);window.gifConfig.codeTest!==!0&&(a=n(34));var l=n(32);o.method={GET:"GET",POST:"POST"},o.defaults={request:{baseUrl:window.location.origin+"/",method:o.method.GET,data:{},responseOnly:!0},options:{dataType:"post",responseType:"auto",cache:!1,async:!0,withCredentials:!1,timeout:3e4,attempts:1}},o.responseOnly=function(t,e){return new f(e)},o.prototype.request=function(t){if("undefined"==typeof t.url)throw new Error("No URL passed in request");var e=c.fn.objectMerge(this.config.hash("request"),this.config.hash("options"),t),n=e.url,r=e.data,i=e.method,s=a.map(i,e.baseUrl+n,r,e);return l.empty(e.responseOnly)||(s=s.then(o.responseOnly)),s},o.prototype.addEndpoint=function(t){if(this.bus.envelopeFactory.is(t)){var e=t.payload;i(e)&&(this.endpoints[e.name]=s(this,e))}},o.prototype.callEndpoint=function(t){if(this.bus.envelopeFactory.is(t)){var e,n=t.payload;if(l.empty(n.name))return void t.failure(r("CALL_ENDPOINT_NAME_NOT_SET","Name not set in payload"));if(!l.set(this.endpoints[n.name]))return void t.failure(r("ENDPOINTS_DOES_NOT_EXIST","Endpoint "+n.name+" does not exist"));e=this.endpoints[n.name],e(n).then(function(e){t.success(e)}).catch(function(){t.failure(arguments)})}},t.exports=o},function(t,e,n){"use strict";function r(t,e){if(s.object(t)&&t instanceof r&&(t=t.asHash()),!s.hash(t))throw new TypeError("config should be a hash");s.hash(e)||(e={}),Object.defineProperty(this,"payload",{writable:!1,value:i(e,t)}),Object.defineProperty(this,"config",{writable:!1,value:r.defaults})}function o(t,e,n){if(!s.string(e))return n;if(!s.hash(t))return n;for(var r=e.split("."),o=t,i=0;i<r.length;++i){if(void 0==o[r[i]])return n;o=o[r[i]]}return o}var i=n(29),s=n(32);r.create=function(t,e){return s.object(t)&&t instanceof r?t.defaults(e):new r(t,e)},r.defaults={throwErrors:!1,processor:function(t){return t}},r.prototype.searchPayload=function(t,e,n,r){s.fn(n)||(n=s.set),s.fn(r)||(r=this.config.processor);var i=o(this.payload,t);if(n(i))i=r(i);else{if(this.config.throwErrors)throw new Error("Key "+t+" not found in configuration");i=e}return i},r.prototype.value=function(t,e){return this.searchPayload(t,e)},r.prototype.string=function(t){return this.searchPayload(t,"",s.string)},r.prototype.boolean=function(t){return this.searchPayload(t,!1,s.bool)},r.prototype.configuration=function(t,e){return s.hash(e)||(e={}),this.searchPayload(t,new r({}),s.hash,function(t){if(s.hash(t))return new r(t,e)})},r.prototype.array=function(t){return this.searchPayload(t,[],s.array)},r.prototype.hash=function(t){return this.searchPayload(t,{},s.hash)},r.prototype.defaults=function(t){return s.hash(t)?new r(this.payload,t):this},r.prototype.asHash=function(){return this.payload},t.exports=r},function(t,e,n){var r,o;!function(i,s){r=s,o="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==o&&(t.exports=o))}(this,function(){var t=Object.prototype,e=Array.prototype,n=t.toString,r=t.hasOwnProperty,o=e.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},i=function(t){return"string"==typeof t||t instanceof String},s=function(t){return"number"==typeof t||t instanceof Number},a=function(t){return t===!!t||t instanceof Boolean},c=function(t){return"function"==typeof t},u=e.isArray||function(t){return"[object Array]"===n.call(t)},f=function(t){return t===Object(t)},l=function(t){return!(!(t&&t.test&&t.exec)||!t.ignoreCase&&t.ignoreCase!==!1)},p="undefined"!=typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return!(!t||1!==t.nodeType)},h=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},d=function(t){if(!t||"object"!=typeof t||p(t)||"undefined"!=typeof window&&t===window||t.constructor&&!r.call(t,"constructor")&&!r.call(t.constructor.prototype,"isPrototypeOf"))return!1;for(var e in t);return void 0===e||r.call(t,e)},y=function(t,e){if(u(t))return o(t,e)>-1;if(f(t)){for(var n in t)if(r.call(t,n)&&t[n]===e)return!0;return!1}return!1},b=function(t){return null!==t&&void 0!==t},m=function(t){if(u(t))return 0===t.length;if(f(t)){if(c(t.valueOf)&&!f(t.valueOf()))return m(t.valueOf());for(var e in t)if(r.call(t,e))return!1;return!0}return!t};return{string:i,number:s,bool:a,fn:c,array:u,object:f,regex:l,element:p,numeric:h,hash:d,inside:y,set:b,empty:m}})},function(t,e,n){"use strict";function r(t){this.hasErrored=!1,this.status=o.set(t.status)?t.status:this.causeError(500),this.balance=o.set(t.balance)?t.balance:this.causeError(0),this.payload=o.set(t.payload)?t.payload:this.causeError({})}var o=n(32);r.GOOD_STATUSES=[200],r.prototype.causeError=function(t){return this.hasErrored=!0,t},r.prototype.isValid=function(){return!this.hasErrored&&o.inside(r.GOOD_STATUSES,this.status)},t.exports=r},function(t,e,n){t.exports=function(){var t="undefined"!=typeof window?window:self,e=n(25),r=n(35),o={},i="json",s="post",a=null,c=0,u=[],f=t.XMLHttpRequest?function(){return new t.XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")},l=""===f().responseType,p=function(n,p,h,d,y){n=n.toUpperCase(),h=h||null,d=d||{};for(var b in o)if(!(b in d))if("object"==typeof o[b]&&"object"==typeof d[b])for(var m in o[b])d[b][m]=o[b][m];else d[b]=o[b];var g,v,w,T,x,E=!1,O=!1,A=!1,S=0,j={},k={text:"*/*",xml:"text/xml",json:"application/json",post:"application/x-www-form-urlencoded",document:"text/html"},_={text:"*/*",xml:"application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1",json:"application/json; q=1.0, text/*; q=0.8, */*; q=0.1"},P=!1,C=e(function(e){return e.abort=function(){A||(v&&4!=v.readyState&&v.abort(),P&&(--c,P=!1),A=!0)},e.send=function(){if(!P){if(c==a)return void u.push(e);if(A)return void(u.length&&u.shift().send());if(++c,P=!0,v=f(),g&&("withCredentials"in v||!t.XDomainRequest||(v=new XDomainRequest,O=!0,"GET"!=n&&"POST"!=n&&(n="POST"))),O?v.open(n,p):(v.open(n,p,d.async,d.user,d.password),l&&d.async&&(v.withCredentials=d.withCredentials)),!O)for(var r in j)j[r]&&v.setRequestHeader(r,j[r]);if(l&&"auto"!=d.responseType)try{v.responseType=d.responseType,E=v.responseType==d.responseType}catch(t){}l||O?(v.onload=R,v.onerror=q,O&&(v.onprogress=function(){})):v.onreadystatechange=function(){4==v.readyState&&R()},d.async?"timeout"in v?(v.timeout=d.timeout,v.ontimeout=I):w=setTimeout(I,d.timeout):O&&(v.ontimeout=function(){}),"auto"!=d.responseType&&"overrideMimeType"in v&&v.overrideMimeType(k[d.responseType]),y&&y(v),O?setTimeout(function(){v.send("GET"!=n?h:null)},0):v.send("GET"!=n?h:null)}},e}),R=function(){var e;if(P=!1,clearTimeout(w),u.length&&u.shift().send(),!A){--c;try{if(E){if("response"in v&&null===v.response)throw"The request response is empty";x=v.response}else{if(e=d.responseType,"auto"==e)if(O)e=i;else{var n=v.getResponseHeader("Content-Type")||"";e=n.indexOf(k.json)>-1?"json":n.indexOf(k.xml)>-1?"xml":"text"}switch(e){case"json":if(v.responseText.length)try{x="JSON"in t?JSON.parse(v.responseText):new Function("return ("+v.responseText+")")()}catch(t){throw"Error while parsing JSON body : "+t}break;case"xml":try{t.DOMParser?x=(new DOMParser).parseFromString(v.responseText,"text/xml"):(x=new ActiveXObject("Microsoft.XMLDOM"),x.async="false",x.loadXML(v.responseText))}catch(t){x=void 0}if(!x||!x.documentElement||x.getElementsByTagName("parsererror").length)throw"Invalid XML";break;default:x=v.responseText}}if("status"in v&&!/^2|1223/.test(v.status))throw v.status+" ("+v.statusText+")";C(!0,[v,x])}catch(t){C(!1,[t,v,x])}}},q=function(t){A||(t="string"==typeof t?t:"Connection aborted",C.abort(),C(!1,[new Error(t),v,null]))},I=function(){A||(d.attempts&&++S==d.attempts?q("Timeout ("+p+")"):(v.abort(),P=!1,C.send()))};if(d.async=!("async"in d)||!!d.async,d.cache="cache"in d&&!!d.cache,d.dataType="dataType"in d?d.dataType.toLowerCase():s,d.responseType="responseType"in d?d.responseType.toLowerCase():"auto",d.user=d.user||"",d.password=d.password||"",d.withCredentials=!!d.withCredentials,d.timeout="timeout"in d?parseInt(d.timeout,10):3e4,d.attempts="attempts"in d?parseInt(d.attempts,10):1,T=p.match(/\/\/(.+?)\//),g=T&&!!T[1]&&T[1]!=location.host,"ArrayBuffer"in t&&h instanceof ArrayBuffer?d.dataType="arraybuffer":"Blob"in t&&h instanceof Blob?d.dataType="blob":"Document"in t&&h instanceof Document?d.dataType="document":"FormData"in t&&h instanceof FormData&&(d.dataType="formdata"),null!==h)switch(d.dataType){case"json":h=JSON.stringify(h);break;case"post":h=r(h)}if(d.headers){var M=function(t,e,n){return e+n.toUpperCase()};for(T in d.headers)j[T.replace(/(^|-)([^-])/g,M)]=d.headers[T]}return"Content-Type"in j||"GET"==n||d.dataType in k&&k[d.dataType]&&(j["Content-Type"]=k[d.dataType]),j.Accept||(j.Accept=d.responseType in _?_[d.responseType]:"*/*"),g||"X-Requested-With"in j||(j["X-Requested-With"]="XMLHttpRequest"),d.cache||"Cache-Control"in j||(j["Cache-Control"]="no-cache"),"GET"==n&&h&&"string"==typeof h&&(p+=(/\?/.test(p)?"&":"?")+h),d.async&&C.send(),C},h=function(t){var n=[],r=0,o=[];return e(function(e){var i=-1,s=function(t){return function(s,a,c,u){var f=++i;return++r,n.push(p(t,e.base+s,a,c,u).then(function(t,n){o[f]=arguments,--r||e(!0,1==o.length?o[0]:[o])},function(){e(!1,arguments)})),e}};e.get=s("GET"),e.post=s("POST"),e.put=s("PUT"),e.delete=s("DELETE"),e.catch=function(t){return e.then(null,t)},e.complete=function(t){var n=function(){t()};return e.then(n,n)},e.map=function(t,e,n,r,o){return s(t.toUpperCase()).call(this,e,n,r,o)};for(var a in t)a in e||(e[a]=t[a]);return e.send=function(){for(var t=0,r=n.length;t<r;++t)n[t].send();return e},e.abort=function(){for(var t=0,r=n.length;t<r;++t)n[t].abort();return e},e})},d={base:"",get:function(){return h(d).get.apply(this,arguments)},post:function(){return h(d).post.apply(this,arguments)},put:function(){return h(d).put.apply(this,arguments)},delete:function(){return h(d).delete.apply(this,arguments)},map:function(){return h(d).map.apply(this,arguments)},xhr2:l,limit:function(t){return a=t,d},setDefaultOptions:function(t){return o=t,d},setDefaultXdrResponseType:function(t){return i=t.toLowerCase(),d},setDefaultDataType:function(t){return s=t.toLowerCase(),d},getOpenRequests:function(){return c}};return d}()},function(t,e,n){var r,o;!function(n){"use strict";var i=function(t){var e=function(t,e,n){n="function"==typeof n?n():null===n?"":void 0===n?"":n,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)},n=function(t,r,o){var i,s,a;if("[object Array]"===Object.prototype.toString.call(r))for(i=0,s=r.length;i<s;i++)n(t+"["+("object"==typeof r[i]?i:"")+"]",r[i],o);else if(r&&"[object Object]"===r.toString())for(a in r)r.hasOwnProperty(a)&&(t?n(t+"["+a+"]",r[a],o,e):n(a,r[a],o,e));else if(t)e(o,t,r);else for(a in r)e(o,a,r[a]);return o};return n("",t,[]).join("&").replace(/%20/g,"+")};"object"==typeof t&&"object"==typeof t.exports?t.exports=i:(r=[],o=function(){return i}.apply(e,r),!(void 0!==o&&(t.exports=o)))}(this)},function(t,e,n){"use strict";function r(t,e){return{code:t,message:e}}function o(t,e){e=new a(e,o.defaults),Object.defineProperties(this,{ticket:{value:e.value("ticket"),writable:!0},config:{value:e,writable:!1},bus:{value:t,writable:!1}}),c.message(t,"webcaller.add",{name:"requestTicket",url:this.config.string("requestUrl"),method:"POST",responseType:"json"}).send(),c.message(t,"webcaller.add",{name:"completeTicket",url:this.config.string("completeUrl"),method:"POST",responseType:"json"}).send(),t.subscribe("ticket.request",s.fn.contextualize(this.handleTicketRequest,this)),t.subscribe("ticket.complete",s.fn.contextualize(this.handleTicketComplete,this))}function i(t,e,n){var r={name:e,data:n,responseOnly:!0},o=s.fn.uuid();return c.request(t,"webcaller.call",o,r).send()}var s=n(24),a=n(31),c=n(37),u=n(29),f=n(32);o.defaults={requestUrl:"api/requestTicket",completeUrl:"api/completeTicket"},o.prototype.handleResponse=function(t){return f.set(t.balance)&&c.message(this.bus,"balance.update",{balance:t.balance}).send(),t.payload},o.prototype.createDataHash=function(){var t=this.config.hash("extra");return t.gameId=this.config.string("gameId"),t},o.prototype.handleTicketRequest=function(t){var e=this;if(c.is(t))return f.set(this.ticket)?void t.success({ticket:this.ticket}):void i("requestTicket",this.createDataHash()).then(e.handleResponse).then(function(n){e.ticket=n.payload,t.success(e.ticket)}).catch(function(t,e,n){return n}).catch(e.handleResponse).catch(function(e,n,r){t.failure(r)})},o.prototype.handleTicketComplete=function(t){if(c.is(t)){if(f.empty(this.ticket))return void t.failure(r("NO_TICKET_FOUND","No ticket found to be completed"));var e=this,n=e.ticket;n.complete=!0,n=u(n,this.config.hash("extra")),i(this.bus,"completeTicket",n).then(e.handleResponse).then(function(n){e.ticket=void 0,t.success(n)}).catch(e.handleResponse).catch(function(e,n,r){t.failure(r)})}},o.TicketGenerator=n(38),t.exports=o},function(t,e,n){"use strict";function r(t,e,n){Object.defineProperties(this,{bus:{value:t,writable:!1},topic:{value:e,writable:!1},type:{value:n,writable:!1},payload:{value:{},writable:!0},sent:{value:!1,writable:!0}})}function o(t,e){if(!r.is(e))throw new Error("Received object is not an Envelope");if(!e.isResponse())throw new Error("Envelope is not a response envelope");e.success?t(!0,[e]):t(!1,[e])}var i=n(24).fn.uuid,s=n(24).Promise,a=n(32);r.request=function(t,e,n,o){a.set(n)&&!a.set(o)&&(o=n,n=i());var s=new r(t,e,r.type.REQUEST);return s.payload=o,s.route=n,s},r.response=function(t,e,n,o){var i=new r(t,e,r.type.RESPONSE);return i.success=n,n?i.payload=o:i.error=o,i},r.message=function(t,e,n){var o=new r(t,e,r.type.MESSAGE);return o.payload=n,o},r.is=function(t){return t instanceof r},r.createResponse=function(t,e,n,o){if("undefined"==typeof o&&(o={}),!r.is(e))throw new Error("Passed object is not an envelope");if(!e.isRequest())throw new Error("Envelope is not a request");return r.response(t,e.route,n,o)},r.type={MESSAGE:"type.message",REQUEST:"type.request",RESPONSE:"type.response"},r.prototype.isRequest=function(){return this.type===r.type.REQUEST},r.prototype.isResponse=function(){return this.type===r.type.RESPONSE},r.prototype.isMessage=function(){return this.type===r.type.MESSAGE},r.prototype.send=function(){if(this.sent)throw new Error("Envelope has already been sent");var t=s();return this.sent=!0,Object.freeze(this),this.isRequest()?t=this.setupResponse():t(!0,[this]),this.bus.broadcast(this.topic,this),t},r.prototype.setupResponse=function(){if(!this.isRequest())throw new Error("Only a Request Envelope can setup a response");var t=s();return this.bus.once(this.route,o.bind(null,t)),t},r.prototype.respond=function(t,e){var n=r.createResponse(this.bus,this,t,e);return n.send()},r.prototype.success=function(t){this.respond(!0,t)},r.prototype.failure=function(t){this.respond(!1,t)},t.exports=r},function(t,e,n){"use strict";function r(t,e){Object.defineProperties(this,{bus:{value:t,writable:!1},generator:{value:this.checkGenerator(e),writable:!0}}),t.subscribe("ticket.request",o.fn.contextualize(this.handleTicketRequest,this)),t.subscribe("ticket.complete",o.fn.contextualize(this.handleTicketComplete,this))}var o=n(24),i=n(32);r.prototype.checkGenerator=function(t){try{if(!i.fn(t.generate))throw new Error}catch(e){t={generate:function(){}}}return t},r.prototype.setGenerator=function(t){this.generator=t},r.prototype.handleTicketRequest=function(t){t.success({payload:{ticket:this.generator.generate()}})},r.prototype.handleTicketComplete=function(t){t.success(!0)},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var o=this;e=new i(e,r.defaults),Object.defineProperty(this,"config",{value:e,writable:!1}),t.subscribe("config",function(t){if(t.isRequest())try{return t.success(o.getConfiguration())}catch(e){return t.failure({error:"CONFIGURATION_NOT_AVAILABLE"})}}),"undefined"!=typeof document&&(e.array("load").forEach(function(t){var e=document.createElement("script");e.src=n+t,document.body.appendChild(e)}),e.array("css").forEach(function(t){var e=document.createElement("link");e.href=n+t,e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)}))}var o=n(32),i=n(31);r.prototype.getConfiguration=function(t){if(!this.config instanceof i)throw new Error("Configuration is not set up properly");return o.empty(t)?this.config.asHash():this.config.value(t)},r.defaults={load:[],css:[],price:10,language:"es_MX",currency:"MXN",logolanguage:"es-MX"},t.exports=r},function(t,e,n){"use strict";function r(t,e){s.bool(e)||(e=!1),Object.defineProperty(this,"bus",{value:t,writable:!1}),this.log=e}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=n(24),s=n(32);r.REQUEST_TICKET="ticket.request",r.COMPLETE_TICKET="ticket.complete",r.FINISH_GAME="game.finish",r.ERROR="error",r.prototype.extractDataFromEnvelope=function(t){return t.payload},r.prototype.request=function(t,e){("undefined"==typeof e?"undefined":o(e))!==o({})&&(e={});var n=this.bus.envelopeFactory.request(t,i.fn.uuid(),e);return n.send().then(this.extractDataFromEnvelope)},r.prototype.subscribe=function(t,e){return this.bus.subscribe(t,e)},r.prototype.unsubscribe=function(t){this.bus.unsubscribe(t)},r.prototype.getTicket=function(){return this.request(r.REQUEST_TICKET).then(this.extractDataFromEnvelope).then(function(t){return t.ticket})},r.prototype.completeTicket=function(){return this.request(r.COMPLETE_TICKET).then(this.extractDataFromEnvelope)},r.prototype.finishGame=function(){return this.request(r.FINISH_GAME).then(this.extractDataFromEnvelope)},r.prototype.getLog=function(){return this.log},r.prototype.onError=function(t){return this.subscribe(r.ERROR,t)},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){return{topic:t,callback:function(){e.apply(this,arguments)},unwrapped:e,context:n}}function o(){Object.defineProperty(this,"_subscriptions",{value:{},writable:!1,configurable:!1,enumerable:!1}),this.envelopeFactory=new s(this)}var i=n(24),s=(n(37),n(42)),a=n(32),c=n(43);o.prototype.subscribe=function(t,e,n){a.empty(n)&&(n=this);var o=r(t,e,n),s=i.fn.uuid();return c(o.topic).subscribe([o.callback,n]),this._subscriptions[s]=o,s},o.prototype.once=function(t,e,n){var r,o=this;return r=this.subscribe(t,function(){o.unsubscribe(r),e.apply(this,arguments)},n)},o.prototype.unsubscribe=function(t){var e=this._subscriptions[t];a.set(e)&&(c(e.topic).unsubscribe(e.callback),delete this._subscriptions[t]);
},o.prototype.broadcast=function(t){c(t).broadcast.apply(c(t),Array.prototype.slice.call(arguments,1))},t.exports=o},function(t,e,n){"use strict";function r(t){Object.defineProperty(this,"bus",{value:t,writable:!1})}var o=n(37),i=n(24).fn.uuid,s=n(32);r.prototype.new=function(t,e){return new o(this.bus,t,e)},r.prototype.request=function(t,e,n){s.set(e)&&!s.set(n)&&(n=e,e=i());var r=this.new(t,o.type.REQUEST);return r.payload=n,r.route=e,r},r.prototype.response=function(t,e,n){var r=this.new(t,o.type.RESPONSE);return r.success=e,e?r.payload=n:r.error=n,r},r.prototype.message=function(t,e){var n=this.new(t,o.type.MESSAGE);return n.payload=e,n},r.prototype.is=function(t){return t instanceof o},t.exports=r},function(t,e,n){!function(e,n,r){t.exports=r(e,n)}("radio",this,function(t,e){"use strict";function n(t){return n.$.channel(t),n.$}return n.$={version:"0.2",channelName:"",channels:[],broadcast:function(){var t,n,r,o,i=this.channels[this.channelName],s=i.length;for(t=0;t<s;t++)n=i[t],"object"==typeof n&&n.length&&(r=n[0],o=n[1]||e),r.apply(o,arguments);return this},channel:function(t){var e=this.channels;return e[t]||(e[t]=[]),this.channelName=t,this},subscribe:function(){var t,e,n=arguments,r=this.channels[this.channelName],o=n.length,i=[];for(t=0;t<o;t++)i=n[t],e="function"==typeof i?[i]:i,"object"==typeof e&&e.length&&r.push(e);return this},unsubscribe:function(){var t,e,n,r=arguments,o=this.channels[this.channelName],i=r.length,s=o.length,a=0;for(t=0;t<i;t++)for(a=0,s=o.length,e=0;e<s;e++)n=e-a,o[n][0]===r[t]&&(o.splice(n,1),a++);return this}},n})},function(t,e,n){"use strict";function r(t,e,n){if("undefined"!=typeof document){n=new i(n,r.defaults),!a.empty(e)&&a.element(e)||(e=document.body);var c=document.createElement("div");c.classList.add("overlay-manager-element"),c.innerHTML=s,n.boolean("hidden")||e.appendChild(c),Object.defineProperties(this,{bus:{value:t,writable:!1},parent:{value:e,writable:!1},element:{value:c,writable:!1},config:{value:n,writable:!1}}),t.subscribe("balance.update",o.fn.contextualize(this.handleBalance,this))}}var o=n(24),i=n(31),s="";window.gifConfig.codeTest!==!0&&(s=n(45));var a=n(32),c=n(46);r.defaults={hidden:!0,tag:"data-o-node",balance:{template:"£#{balance}"}},r.prototype.handleBalance=function(t){var e=c(this.config.string("balance.template"));this.nodes("balance").forEach(function(n){n.innerText=e(t.payload)})},r.prototype.nodes=function(t){return this.element.querySelectorAll("["+this.config.string("tag")+"='"+t+"']")},r.prototype.node=function(t){return this.element.querySelector("["+this.config.string("tag")+"='"+t+"']")},t.exports=r},function(t,e){t.exports='<style>\n    .trigger {\n        position: fixed;\n        bottom: 0;\n        left: 15px;\n        background-color: black;\n        color: white;\n        padding: 15px;\n        border-top-left-radius: 6px;\n        border-top-right-radius: 6px;\n        border: 2px solid white;\n        border-bottom: 0px;\n        cursor: pointer;\n        transition: all .2s ease-in-out;\n    }\n\n    .trigger:hover {\n        transform: scale(1.1);\n    }\n\n    .trigger.hidden {\n        display: none;\n    }\n\n    .overlay {\n        display: none;\n        opacity: 0;\n        -webkit-transition: opacity 400ms ease-in;\n        -moz-transition: opacity 400ms ease-in;\n        transition: opacity 400ms ease-in;\n    }\n\n    .overlay.active {\n        opacity: 1;\n        display: block;\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0, 0, 0, 0.85);\n        background: url(data:;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuNUmK/OAAAAATSURBVBhXY2RgYNgHxGAAYuwDAA78AjwwRoQYAAAAAElFTkSuQmCC) repeat scroll transparent \\9; /* ie fallback png background image */\n        z-index: 9999;\n        color: white;\n\n    }\n\n    .overlay__modal {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n\n        min-width: 250px;\n        min-height: 50px;\n        margin-top: -25px;\n        margin-left: -125px;\n        text-align: center;\n        background-color: white;\n        color: black;\n\n        border-radius: 6px;\n    }\n\n    .overlay__modal__group h3 {\n        margin-bottom: 0px;\n    }\n\n    .overlay__modal__group span {\n        line-height: 50px;\n    }\n\n    .button {\n        display: block;\n        zoom: 1;\n        line-height: normal;\n        white-space: nowrap;\n        vertical-align: middle;\n        text-align: center;\n        cursor: pointer;\n        -webkit-user-drag: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        font-family: inherit;\n        font-size: 100%;\n        padding: .5em 1em;\n        color: #444;\n        color: rgba(0, 0, 0, .8);\n        border: 1px solid #999;\n        border: 0 rgba(0, 0, 0, 0);\n        background-color: #E6E6E6;\n        text-decoration: none;\n        border-radius: 2px;\n\n        margin-left: 15px;\n        margin-right: 15px;\n        margin-bottom: 15px;\n    }\n\n    .button.primary {\n        background-color: #0078e7;\n        color: white;\n    }\n</style>\n\n<div class="trigger" data-o-node="trigger">\n    More\n</div>\n<div class="overlay" data-o-node="overlay">\n    <div class="overlay__modal" data-o-node="overlay.modal">\n        <div class="overlay__modal__group">\n            <h3>Balance</h3>\n            <span data-o-node="balance">\n\t\t\t\t&pound;0.00\n\t\t\t</span>\n        </div>\n\n        <span class="button primary" data-o-node="close">\n\t\t\tCLOSE\n\t\t</span>\n    </div>\n</div>'},function(t,e,n){var r;!function(){function o(t,e){var n=e&&e.blank,r=n?s:i;if((!e||!e.noCache)&&t in r)return r[t];var o=JSON.stringify(t).replace(/#\{(.*?)\}/g,function(t,e){return'"+(typeof obj["'+e+'"]!="undefined"?obj["'+e+'"]:"'+(n?"":t)+'")+"'});return r[t]=Function("obj",(n?a:"")+"return "+o)}var i={},s={},a='if (typeof obj == "undefined") obj = {}; ';"object"==typeof t&&t.exports?t.exports=o:(r=function(){return o}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)))}()},function(t,e){"use strict";function n(t,e){return{value:t,writable:e}}t.exports=n},function(t,e){"use strict";function n(){Object.defineProperty(this,"instances",{value:{},writable:!1})}n.prototype.set=function(t,e){this.instances[t]=e},n.prototype.get=function(t){return this.instances[t]},t.exports=n}]);