(function(e){"use strict";e.com.camelot.iwg||(e.com.camelot.iwg={});e.com.camelot.iwg.lib||(e.com.camelot.iwg.lib={});var t=e.com.camelot,n=t.iwg,r=e.com.camelot.iwg.lib.flassets.MasterSS,i=t.core,s,o=0,u=0,a=null,f=function(){if(typeof f.instance=="object")return f.instance;var e=this;f.instance=this};f.simBank=0;f.THROTTLE=!1;f.UPSCALE=null;f.GAMEWIDTH=null;f.GAMEHEIGHT=null;f.SCALE=null;f.OLDHEIGHT=null;f.OLDWIDTH=null;f.SCALEWIDTH=null;f.SCALEHEIGHT=null;f.DELAY=500;f.pause=!1;f.revealTimeline=new TimelineLite;f.cornerRevealTimeLine=new TimelineLite({delay:.2});f.promptAnimation=new TimelineMax({repeat:-1});f.promptTimeline=new TimelineLite;f.TILES=[];f.CLICKORDER=[];f.LOCK=!1;f.WINDOWSHOW="left";f.HASFINISHED=!1;f._ticket={};f.rowWon=0;f.STAGE=null;f.isUpdate=!1;f.RIGHTWINDOWSTARTX=0;f.TURNSLEFT=0;f._cash=0;f._ticket=i.IWG.ame("ticket");f._ticketIsWin={};f._prizeArray=[];f._loseArray=[];f._ticketGameData=[],f._ticketBoardGameData=f._ticket.params.grid.split(","),f._ticketPrizeTier,f._ticketPrizeAmount,f._ticketPrizeArray=[],f._ticketWinner,f._ticketGridArray=[],f._tokenRows=[],f._tokenCols=[],f._ticketCorners=[],f.GAMESTATE=null;f.INTRO=0;f.PLAYING=1;f.GAMEEND=2;f.CLICKCOUNT=0;f.TURNS=0;f.AUDIO={};f.isLOCKAUDIO=!1;f.LOGO=null;f.GAME=null;f.LEFTWINDOWRIGHTPANE=null;f.BACKGROUND=null;f.MAINGAMECONTAINER=null;f.LEFTWINDOW=null;f.RIGHTWINDOW=null;f.CORNERTILECONTAINER=null;f.ENDGAME=null;f.PROMPT=null;f.PAUSETWEENS=[];f.tick=function(e){f.STAGE.update();if(!f.THROTTLE){if(!a){a=(new Date).getTime();s=0;return}var t=((new Date).getTime()-a)/1e3;a=(new Date).getTime();s=Math.floor(1/t);s<TweenLite.ticker.fps()*.25&&s>0&&u++;o%TweenLite.ticker.fps()===TweenLite.ticker.fps()+10&&(u=0);o++;if(u>TweenLite.ticker.fps()){f.THROTTLE=!0;n.IWGEM.dispatchEvent(MEvent.THROTTLE)}}};f.rescale=function(){f.SCALE=1-f.resize(!0);f.SCALEWIDTH=i.IWG.ame("get",{vars:["gameWidth"]});f.SCALEHEIGHT=i.IWG.ame("get",{vars:["gameHeight"]});f.STAGE.scaleX=f.SCALE;f.STAGE.scaleY=f.SCALE;TweenMax.resumeAll(!0,!0)};f.resize=function(e){f.pause=!1;var t=i.IWG.ame("get",{vars:["gameOrientationCorrect"]});if(t){var n=i.IWG.ame("get",{vars:["gameWidth"]}),r=i.IWG.ame("get",{vars:["gameHeight"]}),s=i.IWG.ame("get",{vars:["availableWidth"]}),o=i.IWG.ame("get",{vars:["availableHeight"]}),u=640,a=960,l,c=a/u,h=n/r;f.GAMEHEIGHT=640;f.GAMEWIDTH=960;c>=h?l=f.UPSCALE=(a-n)/a:l=f.UPSCALE=(u-r)/u;var p=n/2,d=f.GAMEWIDTH*(1-l)/2;f.STAGE.x=p-d;if(e)return l}else f.pause=!0};f.halt=function(){createjs.Sound.setMute(!0)};f.makeBitmapImage=function(e,t,n){var i=new createjs.Sprite(r.ss);i.gotoAndStop(e);i.x=t.x;i.y=t.y;n&&(i.alpha=n);return i};f.Orientation=function(){function t(){var t=e.orientation;switch(t){case 0:game.className="portrait";break;case 90:game.className="landscape-left";break;case-90:game.className="landscape-right";break;default:game.className="portrait-down"}}var n=document.documentElement.className,r=n.split(" ");for(var i in r)if(i==="touch"){f.GAME=document.getElementById("IWGcanvas");e.addEventListener("orientationchange",t,!1);t()}};f.shuffle=function(e){for(var t,n,r=e.length;r;t=Math.floor(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e};f.randomFromInterval=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};f.sparkle=function(e,t,n,r,i,s){var o=0,u=0;e.hasOwnProperty("x")&&(o=e.x);e.hasOwnProperty("y")&&(u=e.y);var a=f.makeBitmapImage(t,{x:0,y:0});a.x=o;a.y=u;a.scaleX=.5;a.scaleY=.5};f.turnsArray=[];f.ParseCheck_Ticket=function(){var e=f._ticket.outcome,t=f._ticket.params,n=f._ticket.prizeList,r=f._ticket.g1;f._ticketPrizeTier=e.tier;var s=n.a;f._ticketPrizeArray=s.split(",");var o=t.grid;f._ticketGridArray=o.split(",");f._ticketCorners=new Array(f._ticketGridArray[0],f._ticketGridArray[5],f._ticketGridArray[30],f._ticketGridArray[35]);var u=t.r;f._tokenRows=u.split(",");var a=t.c;f._tokenCols=a.split(",");var l=e.amount;l=l.split(",").join("");f._ticketPrizeAmount=parseFloat(l);f._ticketWinner=e.isWinner;var c=0,h=r.turn,p=[],d=!1,v=!1,m=!1,g=0;for(var y in h){var b=h[y],w=b.s,E=f._ticketPrizeArray[b.prizeId],S=b.w;f.turnsArray.push(w);b.wF=="c"&&(d=!0);b.wF=="r"&&(v=!0);b.wF=="cnW"&&(m=!0);p.push([w,E,S,d,v,m]);b.prizeId!="-1"&&typeof E!="undefined"&&(c+=parseInt(E));for(var x=0;x<f._ticketCorners.length;x++)w==f._ticketCorners[x]&&g++}f._ticketGameData.push(p);c!=f._ticketPrizeAmount&&i.IWG.ame("error",{mes:["error 1 - no match prize total"]});g===4?f._ticketPrizeTier!=9&&i.IWG.ame("error",{mes:["error 1 - no match prize total"]}):f._ticketPrizeTier==9&&i.IWG.ame("error",{mes:["not 4 corners"]})};f.CURSORPOINTER=function(e){var t=e.target,n=new TimelineLite;n.to(t,.2,{scaleX:.9,scaleY:.9}).call(function(){t.gotoAndStop(t.hover)});document.body.style.cursor="pointer"};f.CURSORDEFAULT=function(e){var t=e.target,n=new TimelineLite;n.to(t,.2,{scaleX:1,scaleY:1}).call(function(){t.gotoAndStop(t.defaultState)});document.body.style.cursor="default"};n._class("iwg.lib.R",f)})(window);
